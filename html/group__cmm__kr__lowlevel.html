<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AWS Encryption SDK for C: Low-level materials provider APIs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AWS Encryption SDK for C
   &#160;<span id="projectnumber">v1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Low-level materials provider APIs</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structaws__cryptosdk__edk.html">aws_cryptosdk_edk</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structaws__cryptosdk__cmm.html">aws_cryptosdk_cmm</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structaws__cryptosdk__keyring.html">aws_cryptosdk_keyring</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structaws__cryptosdk__enc__request.html">aws_cryptosdk_enc_request</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structaws__cryptosdk__enc__materials.html">aws_cryptosdk_enc_materials</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structaws__cryptosdk__dec__request.html">aws_cryptosdk_dec_request</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structaws__cryptosdk__dec__materials.html">aws_cryptosdk_dec_materials</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structaws__cryptosdk__cmm__vt.html">aws_cryptosdk_cmm_vt</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structaws__cryptosdk__keyring__vt.html">aws_cryptosdk_keyring_vt</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga88ab483d6b5e18a5af1455839eaecd1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmm__kr__lowlevel.html#ga88ab483d6b5e18a5af1455839eaecd1c">aws_cryptosdk_edk_clean_up</a> (struct <a class="el" href="structaws__cryptosdk__edk.html">aws_cryptosdk_edk</a> *edk)</td></tr>
<tr class="separator:ga88ab483d6b5e18a5af1455839eaecd1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga43c8f64242479212ba9539f4681ffb38"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmm__kr__lowlevel.html#ga43c8f64242479212ba9539f4681ffb38">aws_cryptosdk_edk_list_init</a> (struct aws_allocator *alloc, struct aws_array_list *edk_list)</td></tr>
<tr class="separator:ga43c8f64242479212ba9539f4681ffb38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac96a91315321e9930f179c2aee35d893"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmm__kr__lowlevel.html#gac96a91315321e9930f179c2aee35d893">aws_cryptosdk_edk_list_clean_up</a> (struct aws_array_list *edk_list)</td></tr>
<tr class="separator:gac96a91315321e9930f179c2aee35d893"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaf364cd0368f35e588be1545402e9842"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmm__kr__lowlevel.html#gaaf364cd0368f35e588be1545402e9842">aws_cryptosdk_edk_list_clear</a> (struct aws_array_list *edk_list)</td></tr>
<tr class="separator:gaaf364cd0368f35e588be1545402e9842"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab4657c10b9eb5b70023615410a66efbf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmm__kr__lowlevel.html#gab4657c10b9eb5b70023615410a66efbf">aws_cryptosdk_edk_init_clone</a> (struct aws_allocator *alloc, struct <a class="el" href="structaws__cryptosdk__edk.html">aws_cryptosdk_edk</a> *dest, const struct <a class="el" href="structaws__cryptosdk__edk.html">aws_cryptosdk_edk</a> *src)</td></tr>
<tr class="separator:gab4657c10b9eb5b70023615410a66efbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7adcfa22bb390db5fff65e43bed50166"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmm__kr__lowlevel.html#ga7adcfa22bb390db5fff65e43bed50166">aws_cryptosdk_edk_eq</a> (const struct <a class="el" href="structaws__cryptosdk__edk.html">aws_cryptosdk_edk</a> *a, const struct <a class="el" href="structaws__cryptosdk__edk.html">aws_cryptosdk_edk</a> *b)</td></tr>
<tr class="separator:ga7adcfa22bb390db5fff65e43bed50166"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9765416e2c8c6a58f33dab967a4e19df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmm__kr__lowlevel.html#ga9765416e2c8c6a58f33dab967a4e19df">aws_cryptosdk_cmm_base_init</a> (struct <a class="el" href="structaws__cryptosdk__cmm.html">aws_cryptosdk_cmm</a> *cmm, const struct <a class="el" href="structaws__cryptosdk__cmm__vt.html">aws_cryptosdk_cmm_vt</a> *vtable)</td></tr>
<tr class="separator:ga9765416e2c8c6a58f33dab967a4e19df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1ac5391be35a34a252fa19ccdad21761"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmm__kr__lowlevel.html#ga1ac5391be35a34a252fa19ccdad21761">aws_cryptosdk_cmm_generate_enc_materials</a> (struct <a class="el" href="structaws__cryptosdk__cmm.html">aws_cryptosdk_cmm</a> *cmm, struct <a class="el" href="structaws__cryptosdk__enc__materials.html">aws_cryptosdk_enc_materials</a> **output, struct <a class="el" href="structaws__cryptosdk__enc__request.html">aws_cryptosdk_enc_request</a> *request)</td></tr>
<tr class="separator:ga1ac5391be35a34a252fa19ccdad21761"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2d9adaf71d84623174acbb690b4fa4f0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmm__kr__lowlevel.html#ga2d9adaf71d84623174acbb690b4fa4f0">aws_cryptosdk_cmm_decrypt_materials</a> (struct <a class="el" href="structaws__cryptosdk__cmm.html">aws_cryptosdk_cmm</a> *cmm, struct <a class="el" href="structaws__cryptosdk__dec__materials.html">aws_cryptosdk_dec_materials</a> **output, struct <a class="el" href="structaws__cryptosdk__dec__request.html">aws_cryptosdk_dec_request</a> *request)</td></tr>
<tr class="separator:ga2d9adaf71d84623174acbb690b4fa4f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gade4874916bd72b6f4b9a94e9817792b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmm__kr__lowlevel.html#gade4874916bd72b6f4b9a94e9817792b2">aws_cryptosdk_keyring_base_init</a> (struct <a class="el" href="structaws__cryptosdk__keyring.html">aws_cryptosdk_keyring</a> *keyring, const struct <a class="el" href="structaws__cryptosdk__keyring__vt.html">aws_cryptosdk_keyring_vt</a> *vtable)</td></tr>
<tr class="separator:gade4874916bd72b6f4b9a94e9817792b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga18d36ac5608791f464e0999fc2559cba"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmm__kr__lowlevel.html#ga18d36ac5608791f464e0999fc2559cba">aws_cryptosdk_keyring_on_encrypt</a> (struct <a class="el" href="structaws__cryptosdk__keyring.html">aws_cryptosdk_keyring</a> *keyring, struct aws_allocator *request_alloc, struct aws_byte_buf *unencrypted_data_key, struct aws_array_list *keyring_trace, struct aws_array_list *edks, const struct aws_hash_table *enc_ctx, enum <a class="el" href="group__session.html#ga3a102b234535436099f0821e677686f9">aws_cryptosdk_alg_id</a> alg)</td></tr>
<tr class="separator:ga18d36ac5608791f464e0999fc2559cba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3372f5263fcf4a4411dd140d54d732cf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmm__kr__lowlevel.html#ga3372f5263fcf4a4411dd140d54d732cf">aws_cryptosdk_keyring_on_decrypt</a> (struct <a class="el" href="structaws__cryptosdk__keyring.html">aws_cryptosdk_keyring</a> *keyring, struct aws_allocator *request_alloc, struct aws_byte_buf *unencrypted_data_key, struct aws_array_list *keyring_trace, const struct aws_array_list *edks, const struct aws_hash_table *enc_ctx, enum <a class="el" href="group__session.html#ga3a102b234535436099f0821e677686f9">aws_cryptosdk_alg_id</a> alg)</td></tr>
<tr class="separator:ga3372f5263fcf4a4411dd140d54d732cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga26a46ab4446728a6c4a45dc2c1ce5481"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structaws__cryptosdk__enc__materials.html">aws_cryptosdk_enc_materials</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmm__kr__lowlevel.html#ga26a46ab4446728a6c4a45dc2c1ce5481">aws_cryptosdk_enc_materials_new</a> (struct aws_allocator *alloc, enum <a class="el" href="group__session.html#ga3a102b234535436099f0821e677686f9">aws_cryptosdk_alg_id</a> alg)</td></tr>
<tr class="separator:ga26a46ab4446728a6c4a45dc2c1ce5481"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeac33f5a5ab024a8a5362b1af72d4c75"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmm__kr__lowlevel.html#gaeac33f5a5ab024a8a5362b1af72d4c75">aws_cryptosdk_enc_materials_destroy</a> (struct <a class="el" href="structaws__cryptosdk__enc__materials.html">aws_cryptosdk_enc_materials</a> *enc_mat)</td></tr>
<tr class="separator:gaeac33f5a5ab024a8a5362b1af72d4c75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0c23bb5e7a2fcdd37ac99cec885c1875"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structaws__cryptosdk__dec__materials.html">aws_cryptosdk_dec_materials</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmm__kr__lowlevel.html#ga0c23bb5e7a2fcdd37ac99cec885c1875">aws_cryptosdk_dec_materials_new</a> (struct aws_allocator *alloc, enum <a class="el" href="group__session.html#ga3a102b234535436099f0821e677686f9">aws_cryptosdk_alg_id</a> alg)</td></tr>
<tr class="separator:ga0c23bb5e7a2fcdd37ac99cec885c1875"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabc3c91032aafde829aa359036142fb33"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cmm__kr__lowlevel.html#gabc3c91032aafde829aa359036142fb33">aws_cryptosdk_dec_materials_destroy</a> (struct <a class="el" href="structaws__cryptosdk__dec__materials.html">aws_cryptosdk_dec_materials</a> *dec_mat)</td></tr>
<tr class="separator:gabc3c91032aafde829aa359036142fb33"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This section contains low-level APIs of interest to developers of custom keyrings or CMMs. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga9765416e2c8c6a58f33dab967a4e19df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9765416e2c8c6a58f33dab967a4e19df">&#9670;&nbsp;</a></span>aws_cryptosdk_cmm_base_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aws_cryptosdk_cmm_base_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaws__cryptosdk__cmm.html">aws_cryptosdk_cmm</a> *&#160;</td>
          <td class="paramname"><em>cmm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structaws__cryptosdk__cmm__vt.html">aws_cryptosdk_cmm_vt</a> *&#160;</td>
          <td class="paramname"><em>vtable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the base structure for a CMM. The implementation of a CMM needs to call this function to set up the vtable and reference count. On return, the reference count is initialized to 1. </p>

<p class="definition">Definition at line <a class="el" href="materials_8h_source.html#l00331">331</a> of file <a class="el" href="materials_8h_source.html">materials.h</a>.</p>

</div>
</div>
<a id="ga2d9adaf71d84623174acbb690b4fa4f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2d9adaf71d84623174acbb690b4fa4f0">&#9670;&nbsp;</a></span>aws_cryptosdk_cmm_decrypt_materials()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int aws_cryptosdk_cmm_decrypt_materials </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaws__cryptosdk__cmm.html">aws_cryptosdk_cmm</a> *&#160;</td>
          <td class="paramname"><em>cmm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structaws__cryptosdk__dec__materials.html">aws_cryptosdk_dec_materials</a> **&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structaws__cryptosdk__dec__request.html">aws_cryptosdk_dec_request</a> *&#160;</td>
          <td class="paramname"><em>request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Receives decryption request from user and attempts to get decryption materials.</p>
<p>On success returns AWS_OP_SUCCESS and allocates decryption materials object at address pointed to by output.</p>
<p>On failure returns AWS_OP_ERR, sets address pointed to by output to NULL, and sets internal AWS error code. </p>

<p class="definition">Definition at line <a class="el" href="materials_8h_source.html#l00383">383</a> of file <a class="el" href="materials_8h_source.html">materials.h</a>.</p>

</div>
</div>
<a id="ga1ac5391be35a34a252fa19ccdad21761"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1ac5391be35a34a252fa19ccdad21761">&#9670;&nbsp;</a></span>aws_cryptosdk_cmm_generate_enc_materials()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int aws_cryptosdk_cmm_generate_enc_materials </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaws__cryptosdk__cmm.html">aws_cryptosdk_cmm</a> *&#160;</td>
          <td class="paramname"><em>cmm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structaws__cryptosdk__enc__materials.html">aws_cryptosdk_enc_materials</a> **&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structaws__cryptosdk__enc__request.html">aws_cryptosdk_enc_request</a> *&#160;</td>
          <td class="paramname"><em>request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Receives encryption request from user and attempts to generate encryption materials, including an encrypted data key and a list of EDKs for doing encryption.</p>
<p>On success returns AWS_OP_SUCCESS and allocates encryption materials object at address pointed to by output.</p>
<p>On failure returns AWS_OP_ERR, sets address pointed to by output to NULL, and sets internal AWS error code. </p>

<p class="definition">Definition at line <a class="el" href="materials_8h_source.html#l00366">366</a> of file <a class="el" href="materials_8h_source.html">materials.h</a>.</p>

</div>
</div>
<a id="gabc3c91032aafde829aa359036142fb33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabc3c91032aafde829aa359036142fb33">&#9670;&nbsp;</a></span>aws_cryptosdk_dec_materials_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aws_cryptosdk_dec_materials_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaws__cryptosdk__dec__materials.html">aws_cryptosdk_dec_materials</a> *&#160;</td>
          <td class="paramname"><em>dec_mat</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deallocates all memory associated with the decryption materials object including the object itself and the unencrypted data key it is holding, if an EDK has been decrypted successfully. </p>

</div>
</div>
<a id="ga0c23bb5e7a2fcdd37ac99cec885c1875"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0c23bb5e7a2fcdd37ac99cec885c1875">&#9670;&nbsp;</a></span>aws_cryptosdk_dec_materials_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structaws__cryptosdk__dec__materials.html">aws_cryptosdk_dec_materials</a>* aws_cryptosdk_dec_materials_new </td>
          <td>(</td>
          <td class="paramtype">struct aws_allocator *&#160;</td>
          <td class="paramname"><em>alloc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__session.html#ga3a102b234535436099f0821e677686f9">aws_cryptosdk_alg_id</a>&#160;</td>
          <td class="paramname"><em>alg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocates a new decryption materials object. Note that no memory will be allocated to the byte buffer for the unencrypted data key. That will only be allocated when an EDK is decrypted.</p>
<p>On failure, returns NULL and an internal AWS error code is set. </p>

</div>
</div>
<a id="ga88ab483d6b5e18a5af1455839eaecd1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga88ab483d6b5e18a5af1455839eaecd1c">&#9670;&nbsp;</a></span>aws_cryptosdk_edk_clean_up()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aws_cryptosdk_edk_clean_up </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaws__cryptosdk__edk.html">aws_cryptosdk_edk</a> *&#160;</td>
          <td class="paramname"><em>edk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deallocates all memory associated with an EDK. Setting all bytes of an EDK to zero when you declare it will make this safe to call even if some buffers are unused. </p>

</div>
</div>
<a id="ga7adcfa22bb390db5fff65e43bed50166"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7adcfa22bb390db5fff65e43bed50166">&#9670;&nbsp;</a></span>aws_cryptosdk_edk_eq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool aws_cryptosdk_edk_eq </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structaws__cryptosdk__edk.html">aws_cryptosdk_edk</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structaws__cryptosdk__edk.html">aws_cryptosdk_edk</a> *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns true if the contents of all EDK byte buffers are identical, false otherwise. </p>

<p class="definition">Definition at line <a class="el" href="edk_8h_source.html#l00085">85</a> of file <a class="el" href="edk_8h_source.html">edk.h</a>.</p>

</div>
</div>
<a id="gab4657c10b9eb5b70023615410a66efbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab4657c10b9eb5b70023615410a66efbf">&#9670;&nbsp;</a></span>aws_cryptosdk_edk_init_clone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int aws_cryptosdk_edk_init_clone </td>
          <td>(</td>
          <td class="paramtype">struct aws_allocator *&#160;</td>
          <td class="paramname"><em>alloc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structaws__cryptosdk__edk.html">aws_cryptosdk_edk</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structaws__cryptosdk__edk.html">aws_cryptosdk_edk</a> *&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Copies the EDK data in src to dest. </p>

</div>
</div>
<a id="gac96a91315321e9930f179c2aee35d893"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac96a91315321e9930f179c2aee35d893">&#9670;&nbsp;</a></span>aws_cryptosdk_edk_list_clean_up()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aws_cryptosdk_edk_list_clean_up </td>
          <td>(</td>
          <td class="paramtype">struct aws_array_list *&#160;</td>
          <td class="paramname"><em>edk_list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deallocates all memory associated with all EDKs in the list and then deallocates the list. </p>

</div>
</div>
<a id="gaaf364cd0368f35e588be1545402e9842"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaf364cd0368f35e588be1545402e9842">&#9670;&nbsp;</a></span>aws_cryptosdk_edk_list_clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aws_cryptosdk_edk_list_clear </td>
          <td>(</td>
          <td class="paramtype">struct aws_array_list *&#160;</td>
          <td class="paramname"><em>edk_list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deallocates all memory associated with all EDKs in the list and then clears the list. The array list itself remains allocated but empty. </p>

</div>
</div>
<a id="ga43c8f64242479212ba9539f4681ffb38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga43c8f64242479212ba9539f4681ffb38">&#9670;&nbsp;</a></span>aws_cryptosdk_edk_list_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int aws_cryptosdk_edk_list_init </td>
          <td>(</td>
          <td class="paramtype">struct aws_allocator *&#160;</td>
          <td class="paramname"><em>alloc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct aws_array_list *&#160;</td>
          <td class="paramname"><em>edk_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocates an empty list of EDKs. </p>

</div>
</div>
<a id="gaeac33f5a5ab024a8a5362b1af72d4c75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeac33f5a5ab024a8a5362b1af72d4c75">&#9670;&nbsp;</a></span>aws_cryptosdk_enc_materials_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aws_cryptosdk_enc_materials_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaws__cryptosdk__enc__materials.html">aws_cryptosdk_enc_materials</a> *&#160;</td>
          <td class="paramname"><em>enc_mat</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deallocates all memory associated with the encryption materials object including the object itself. All keys in the materials will have their associated memory also deallocated, but make sure that they have been initialized properly per the comments on aws_cryptosdk_keyring_generate_data_key. </p>

</div>
</div>
<a id="ga26a46ab4446728a6c4a45dc2c1ce5481"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga26a46ab4446728a6c4a45dc2c1ce5481">&#9670;&nbsp;</a></span>aws_cryptosdk_enc_materials_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structaws__cryptosdk__enc__materials.html">aws_cryptosdk_enc_materials</a>* aws_cryptosdk_enc_materials_new </td>
          <td>(</td>
          <td class="paramtype">struct aws_allocator *&#160;</td>
          <td class="paramname"><em>alloc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__session.html#ga3a102b234535436099f0821e677686f9">aws_cryptosdk_alg_id</a>&#160;</td>
          <td class="paramname"><em>alg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocates a new encryption materials object, including allocating memory to the list of EDKs. The list of EDKs will be empty and no memory will be allocated to any byte buffers in that list, nor will memory be allocated to the unencrypted data key buffer.</p>
<p>On failure, returns NULL and an error code will be set. </p>

</div>
</div>
<a id="gade4874916bd72b6f4b9a94e9817792b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gade4874916bd72b6f4b9a94e9817792b2">&#9670;&nbsp;</a></span>aws_cryptosdk_keyring_base_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aws_cryptosdk_keyring_base_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaws__cryptosdk__keyring.html">aws_cryptosdk_keyring</a> *&#160;</td>
          <td class="paramname"><em>keyring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structaws__cryptosdk__keyring__vt.html">aws_cryptosdk_keyring_vt</a> *&#160;</td>
          <td class="paramname"><em>vtable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the base structure for a keyring. The implementation of a keyring needs to call this function to set up the vtable and reference count. On return, the reference count is initialized to 1. </p>

<p class="definition">Definition at line <a class="el" href="materials_8h_source.html#l00446">446</a> of file <a class="el" href="materials_8h_source.html">materials.h</a>.</p>

</div>
</div>
<a id="ga3372f5263fcf4a4411dd140d54d732cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3372f5263fcf4a4411dd140d54d732cf">&#9670;&nbsp;</a></span>aws_cryptosdk_keyring_on_decrypt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int aws_cryptosdk_keyring_on_decrypt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaws__cryptosdk__keyring.html">aws_cryptosdk_keyring</a> *&#160;</td>
          <td class="paramname"><em>keyring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct aws_allocator *&#160;</td>
          <td class="paramname"><em>request_alloc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct aws_byte_buf *&#160;</td>
          <td class="paramname"><em>unencrypted_data_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct aws_array_list *&#160;</td>
          <td class="paramname"><em>keyring_trace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct aws_array_list *&#160;</td>
          <td class="paramname"><em>edks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct aws_hash_table *&#160;</td>
          <td class="paramname"><em>enc_ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__session.html#ga3a102b234535436099f0821e677686f9">aws_cryptosdk_alg_id</a>&#160;</td>
          <td class="paramname"><em>alg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The KR attempts to find one of the EDKs to decrypt.</p>
<p>On success AWS_OP_SUCCESS will be returned. This does not necessarily mean that the data key will be decrypted, as it is normal behavior that a particular KR may not find an EDK that it can decrypt. To determine whether the data key was decrypted, check unencrypted_data_key.buffer. If the data key was not decrypted, that pointer will be set to NULL. If the data key was decrypted, that pointer will point to the bytes of the key.</p>
<p>On internal failure, AWS_OP_ERR will be returned and an error code will be set. </p>

</div>
</div>
<a id="ga18d36ac5608791f464e0999fc2559cba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga18d36ac5608791f464e0999fc2559cba">&#9670;&nbsp;</a></span>aws_cryptosdk_keyring_on_encrypt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int aws_cryptosdk_keyring_on_encrypt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaws__cryptosdk__keyring.html">aws_cryptosdk_keyring</a> *&#160;</td>
          <td class="paramname"><em>keyring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct aws_allocator *&#160;</td>
          <td class="paramname"><em>request_alloc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct aws_byte_buf *&#160;</td>
          <td class="paramname"><em>unencrypted_data_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct aws_array_list *&#160;</td>
          <td class="paramname"><em>keyring_trace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct aws_array_list *&#160;</td>
          <td class="paramname"><em>edks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct aws_hash_table *&#160;</td>
          <td class="paramname"><em>enc_ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="group__session.html#ga3a102b234535436099f0821e677686f9">aws_cryptosdk_alg_id</a>&#160;</td>
          <td class="paramname"><em>alg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If byte buffer for unencrypted_data_key is already allocated, this makes zero or more encrypted data keys which decrypt to that data key and pushes them onto the EDK list.</p>
<p>If byte buffer for unencrypted_data_key is not already allocated, this may make a new data key, allocating the buffer and putting the data key into that buffer. It also makes zero or more encrypted data keys which decrypt to that data key and pushes them onto the EDK list.</p>
<p>On success (1) AWS_OP_SUCCESS is returned, (2) if the unencrypted_data_key buffer was previously allocated, it will be unchanged, (3) if the unencrypted_data_key buffer was not previously allocated, it may now be allocated, (4) zero or more EDKS will be appended to the list of EDKS.</p>
<p>On failure AWS_OP_ERR is returned, an internal AWS error code is set. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AWS Encryption SDK for C: Caching APIs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AWS Encryption SDK for C
   &#160;<span id="projectnumber">v1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Caching APIs</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga7d265c1712b27c883d6f2057ea6d31c2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__caching.html#ga7d265c1712b27c883d6f2057ea6d31c2">AWS_CRYPTOSDK_CACHE_MAX_LIMIT_MESSAGES</a>&#160;&#160;&#160;((uint64_t)1 &lt;&lt; 32)</td></tr>
<tr class="separator:ga7d265c1712b27c883d6f2057ea6d31c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae9f7838ea1a80675a76d6ebb01b82c35"><td class="memItemLeft" align="right" valign="top">struct aws_cryptosdk_materials_cache *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__caching.html#gae9f7838ea1a80675a76d6ebb01b82c35">aws_cryptosdk_materials_cache_local_new</a> (struct aws_allocator *alloc, size_t capacity)</td></tr>
<tr class="separator:gae9f7838ea1a80675a76d6ebb01b82c35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5dd87aefb779ba86269fbcba2ccaeca5"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__caching.html#ga5dd87aefb779ba86269fbcba2ccaeca5">aws_cryptosdk_materials_cache_entry_count</a> (const struct aws_cryptosdk_materials_cache *cache)</td></tr>
<tr class="separator:ga5dd87aefb779ba86269fbcba2ccaeca5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacfde62931c977f2c33cd1ba99883e144"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__caching.html#gacfde62931c977f2c33cd1ba99883e144">aws_cryptosdk_materials_cache_clear</a> (struct aws_cryptosdk_materials_cache *cache)</td></tr>
<tr class="separator:gacfde62931c977f2c33cd1ba99883e144"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2de2306e1e8a40cd3decc7b8f9f8fb94"><td class="memItemLeft" align="right" valign="top">struct aws_cryptosdk_materials_cache *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__caching.html#ga2de2306e1e8a40cd3decc7b8f9f8fb94">aws_cryptosdk_materials_cache_retain</a> (struct aws_cryptosdk_materials_cache *materials_cache)</td></tr>
<tr class="separator:ga2de2306e1e8a40cd3decc7b8f9f8fb94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f5ed8a55fd167ff436b3c4437ea754d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__caching.html#ga5f5ed8a55fd167ff436b3c4437ea754d">aws_cryptosdk_materials_cache_release</a> (struct aws_cryptosdk_materials_cache *materials_cache)</td></tr>
<tr class="separator:ga5f5ed8a55fd167ff436b3c4437ea754d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeae90cd48b352c0d694381d71c3022d3"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structaws__cryptosdk__cmm.html">aws_cryptosdk_cmm</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__caching.html#gaeae90cd48b352c0d694381d71c3022d3">aws_cryptosdk_caching_cmm_new_from_cmm</a> (struct aws_allocator *alloc, struct aws_cryptosdk_materials_cache *materials_cache, struct <a class="el" href="structaws__cryptosdk__cmm.html">aws_cryptosdk_cmm</a> *upstream, const struct aws_byte_buf *partition_id, uint64_t cache_limit_ttl, enum aws_timestamp_unit cache_limit_ttl_units)</td></tr>
<tr class="separator:gaeae90cd48b352c0d694381d71c3022d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae79999f9cecf68c86b24829c6c01aaf7"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structaws__cryptosdk__cmm.html">aws_cryptosdk_cmm</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__caching.html#gae79999f9cecf68c86b24829c6c01aaf7">aws_cryptosdk_caching_cmm_new_from_keyring</a> (struct aws_allocator *alloc, struct aws_cryptosdk_materials_cache *materials_cache, struct <a class="el" href="structaws__cryptosdk__keyring.html">aws_cryptosdk_keyring</a> *keyring, const struct aws_byte_buf *partition_id, uint64_t cache_limit_ttl, enum aws_timestamp_unit cache_limit_ttl_units)</td></tr>
<tr class="separator:gae79999f9cecf68c86b24829c6c01aaf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga568b28a1d78d05617f77cdb573b87eba"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__caching.html#ga568b28a1d78d05617f77cdb573b87eba">aws_cryptosdk_caching_cmm_set_ttl</a> (struct <a class="el" href="structaws__cryptosdk__cmm.html">aws_cryptosdk_cmm</a> *cmm, uint64_t ttl, enum aws_timestamp_unit ttl_units)</td></tr>
<tr class="separator:ga568b28a1d78d05617f77cdb573b87eba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac7d9d141904d97c89637e9162e416ab6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__caching.html#gac7d9d141904d97c89637e9162e416ab6">aws_cryptosdk_caching_cmm_set_limit_bytes</a> (struct <a class="el" href="structaws__cryptosdk__cmm.html">aws_cryptosdk_cmm</a> *cmm, uint64_t limit_bytes)</td></tr>
<tr class="separator:gac7d9d141904d97c89637e9162e416ab6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf298383cea70baeaac20a652aead75a5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__caching.html#gaf298383cea70baeaac20a652aead75a5">aws_cryptosdk_caching_cmm_set_limit_messages</a> (struct <a class="el" href="structaws__cryptosdk__cmm.html">aws_cryptosdk_cmm</a> *cmm, uint64_t limit_messages)</td></tr>
<tr class="separator:gaf298383cea70baeaac20a652aead75a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The caching CMM caches the results of encryption and decryption operations to reduce the number of calls made to backing keyrings (e.g. KMS).</p>
<p>To use the caching API, construct a local cache (using <a class="el" href="group__caching.html#gae9f7838ea1a80675a76d6ebb01b82c35">aws_cryptosdk_materials_cache_local_new</a>) and pass it to the constructor of a caching cmm (aws_cryptosdk_caching_cmm_new), along with a delegate CMM that generates the encryption and decryption materials that are cached.</p>
<p>When constructing a caching CMM, you are required to set a time-to-live (TTL) for data keys in the cache. We also recommend setting one of the two additional security thresholds using <a class="el" href="group__caching.html#gac7d9d141904d97c89637e9162e416ab6">aws_cryptosdk_caching_cmm_set_limit_bytes</a> or <a class="el" href="group__caching.html#gaf298383cea70baeaac20a652aead75a5">aws_cryptosdk_caching_cmm_set_limit_messages</a> to ensure that data keys expire and are refreshed periodically.</p>
<p>As with CMMs and keyrings, the local cache is reference-counted. In simple use cases where there is only one local cache and one CMM, you can immediately call <a class="el" href="group__caching.html#ga5f5ed8a55fd167ff436b3c4437ea754d">aws_cryptosdk_materials_cache_release</a> on the local cache after constructing the CMM.</p>
<p>Multiple caching CMMs can share the same local cache, but by default will not use each other's entries. (They share the entry count limit, but otherwise are partitioned from each other.) This is to avoid unexpected behavior in case the cache-miss delegate CMMs are different. If you want two caching CMMs to share their entries, pass the same partition ID to both calls to aws_cryptosdk_caching_cmm_new . </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga7d265c1712b27c883d6f2057ea6d31c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7d265c1712b27c883d6f2057ea6d31c2">&#9670;&nbsp;</a></span>AWS_CRYPTOSDK_CACHE_MAX_LIMIT_MESSAGES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AWS_CRYPTOSDK_CACHE_MAX_LIMIT_MESSAGES&#160;&#160;&#160;((uint64_t)1 &lt;&lt; 32)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cache_8h_source.html#l00058">58</a> of file <a class="el" href="cache_8h_source.html">cache.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaeae90cd48b352c0d694381d71c3022d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeae90cd48b352c0d694381d71c3022d3">&#9670;&nbsp;</a></span>aws_cryptosdk_caching_cmm_new_from_cmm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structaws__cryptosdk__cmm.html">aws_cryptosdk_cmm</a>* aws_cryptosdk_caching_cmm_new_from_cmm </td>
          <td>(</td>
          <td class="paramtype">struct aws_allocator *&#160;</td>
          <td class="paramname"><em>alloc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct aws_cryptosdk_materials_cache *&#160;</td>
          <td class="paramname"><em>materials_cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structaws__cryptosdk__cmm.html">aws_cryptosdk_cmm</a> *&#160;</td>
          <td class="paramname"><em>upstream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct aws_byte_buf *&#160;</td>
          <td class="paramname"><em>partition_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>cache_limit_ttl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum aws_timestamp_unit&#160;</td>
          <td class="paramname"><em>cache_limit_ttl_units</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a new instance of the caching crypto materials manager. This CMM will intercept requests for encrypt and decrypt materials, and forward them to the provided materials cache.</p>
<p>If multiple caching CMMs are attached to the same materials_cache, they will share entries if and only if the partition_id parameter is set to the same string. Unless you need to use this feature, we recommend passing NULL, in which case the caching CMM will internally generate a random partition ID to ensure it does not collide with any other CMM.</p>
<p>Parameters: </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alloc</td><td>The allocator to use for the caching CMM itself (not for cache entries, however) </td></tr>
    <tr><td class="paramname">materials_cache</td><td>The backing cache </td></tr>
    <tr><td class="paramname">upstream</td><td>The upstream CMM to query on a cache miss </td></tr>
    <tr><td class="paramname">partition_id</td><td>The partition ID to use to avoid collisions with other CMMs. This string need not remain valid once this function returns. If NULL, a random partition ID will be generated and used. </td></tr>
    <tr><td class="paramname">cache_limit_ttl</td><td>The amount of time that a data key can be used for. </td></tr>
    <tr><td class="paramname">cache_limit_ttl_units</td><td>The units of cache_limit_ttl. Allowable values are defined in aws/common/clock.h </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae79999f9cecf68c86b24829c6c01aaf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae79999f9cecf68c86b24829c6c01aaf7">&#9670;&nbsp;</a></span>aws_cryptosdk_caching_cmm_new_from_keyring()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structaws__cryptosdk__cmm.html">aws_cryptosdk_cmm</a>* aws_cryptosdk_caching_cmm_new_from_keyring </td>
          <td>(</td>
          <td class="paramtype">struct aws_allocator *&#160;</td>
          <td class="paramname"><em>alloc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct aws_cryptosdk_materials_cache *&#160;</td>
          <td class="paramname"><em>materials_cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structaws__cryptosdk__keyring.html">aws_cryptosdk_keyring</a> *&#160;</td>
          <td class="paramname"><em>keyring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct aws_byte_buf *&#160;</td>
          <td class="paramname"><em>partition_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>cache_limit_ttl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum aws_timestamp_unit&#160;</td>
          <td class="paramname"><em>cache_limit_ttl_units</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a new instance of the caching crypto materials manager. This CMM will intercept requests for encrypt and decrypt materials, and forward them to the provided materials cache.</p>
<p>If multiple caching CMMs are attached to the same materials_cache, they will share entries if and only if the partition_id parameter is set to the same string. Unless you need to use this feature, we recommend passing NULL, in which case the caching CMM will internally generate a random partition ID to ensure it does not collide with any other CMM.</p>
<p>Parameters: </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alloc</td><td>The allocator to use for the caching CMM itself (not for cache entries, however) </td></tr>
    <tr><td class="paramname">materials_cache</td><td>The backing cache </td></tr>
    <tr><td class="paramname">keyring</td><td>The keyring that will encrypt or decrypt data keys on a cache miss. This function uses a default CMM that is configured with the provided keyring as the upstream CMM. </td></tr>
    <tr><td class="paramname">partition_id</td><td>The partition ID to use to avoid collisions with other CMMs. This string need not remain valid once this function returns. If NULL, a random partition ID will be generated and used. </td></tr>
    <tr><td class="paramname">cache_limit_ttl</td><td>The amount of time that a data key can be used for. </td></tr>
    <tr><td class="paramname">cache_limit_ttl_units</td><td>The units of cache_limit_ttl. Allowable values are defined in aws/common/clock.h </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gac7d9d141904d97c89637e9162e416ab6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac7d9d141904d97c89637e9162e416ab6">&#9670;&nbsp;</a></span>aws_cryptosdk_caching_cmm_set_limit_bytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int aws_cryptosdk_caching_cmm_set_limit_bytes </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaws__cryptosdk__cmm.html">aws_cryptosdk_cmm</a> *&#160;</td>
          <td class="paramname"><em>cmm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>limit_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configures the maximum number of bytes that may be encrypted by a single data key. This value has a maximum of 2^63 - 1 (i.e., INT64_MAX, <em>not</em> UINT64_MAX) </p>

</div>
</div>
<a id="gaf298383cea70baeaac20a652aead75a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf298383cea70baeaac20a652aead75a5">&#9670;&nbsp;</a></span>aws_cryptosdk_caching_cmm_set_limit_messages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int aws_cryptosdk_caching_cmm_set_limit_messages </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaws__cryptosdk__cmm.html">aws_cryptosdk_cmm</a> *&#160;</td>
          <td class="paramname"><em>cmm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>limit_messages</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configures the maximum number of messages that may be encrypted by a single data key. This value cannot be zero and has a maximum of 2^32 (i.e., AWS_CRYPTOSDK_CACHE_MAX_LIMIT_MESSAGES) </p>

</div>
</div>
<a id="ga568b28a1d78d05617f77cdb573b87eba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga568b28a1d78d05617f77cdb573b87eba">&#9670;&nbsp;</a></span>aws_cryptosdk_caching_cmm_set_ttl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int aws_cryptosdk_caching_cmm_set_ttl </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structaws__cryptosdk__cmm.html">aws_cryptosdk_cmm</a> *&#160;</td>
          <td class="paramname"><em>cmm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>ttl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum aws_timestamp_unit&#160;</td>
          <td class="paramname"><em>ttl_units</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configures the amount of time that a data key can be used for. This value must be greater than zero. </p>

</div>
</div>
<a id="gacfde62931c977f2c33cd1ba99883e144"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacfde62931c977f2c33cd1ba99883e144">&#9670;&nbsp;</a></span>aws_cryptosdk_materials_cache_clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aws_cryptosdk_materials_cache_clear </td>
          <td>(</td>
          <td class="paramtype">struct aws_cryptosdk_materials_cache *&#160;</td>
          <td class="paramname"><em>cache</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attempts to clear all entries in the cache. This method is threadsafe, though any entries being inserted in parallel with the clear operation may not end up being cleared. </p>

<p class="definition">Definition at line <a class="el" href="cache_8h_source.html#l00481">481</a> of file <a class="el" href="cache_8h_source.html">cache.h</a>.</p>

</div>
</div>
<a id="ga5dd87aefb779ba86269fbcba2ccaeca5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5dd87aefb779ba86269fbcba2ccaeca5">&#9670;&nbsp;</a></span>aws_cryptosdk_materials_cache_entry_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t aws_cryptosdk_materials_cache_entry_count </td>
          <td>(</td>
          <td class="paramtype">const struct aws_cryptosdk_materials_cache *&#160;</td>
          <td class="paramname"><em>cache</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns an estimate of the number of entries in the cache. If a size estimate is not available, returns SIZE_MAX. </p>

<p class="definition">Definition at line <a class="el" href="cache_8h_source.html#l00465">465</a> of file <a class="el" href="cache_8h_source.html">cache.h</a>.</p>

</div>
</div>
<a id="gae9f7838ea1a80675a76d6ebb01b82c35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae9f7838ea1a80675a76d6ebb01b82c35">&#9670;&nbsp;</a></span>aws_cryptosdk_materials_cache_local_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct aws_cryptosdk_materials_cache* aws_cryptosdk_materials_cache_local_new </td>
          <td>(</td>
          <td class="paramtype">struct aws_allocator *&#160;</td>
          <td class="paramname"><em>alloc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>capacity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a new instance of the built-in local materials cache. This cache is thread safe, and uses a simple LRU policy (with capacity shared between encrypt and decrypt) to evict entries. </p>

</div>
</div>
<a id="ga5f5ed8a55fd167ff436b3c4437ea754d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5f5ed8a55fd167ff436b3c4437ea754d">&#9670;&nbsp;</a></span>aws_cryptosdk_materials_cache_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void aws_cryptosdk_materials_cache_release </td>
          <td>(</td>
          <td class="paramtype">struct aws_cryptosdk_materials_cache *&#160;</td>
          <td class="paramname"><em>materials_cache</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Decrements the reference count on the cache; if the new reference count is zero, the cache is destroyed. </p>

<p class="definition">Definition at line <a class="el" href="cache_8h_source.html#l00501">501</a> of file <a class="el" href="cache_8h_source.html">cache.h</a>.</p>

</div>
</div>
<a id="ga2de2306e1e8a40cd3decc7b8f9f8fb94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2de2306e1e8a40cd3decc7b8f9f8fb94">&#9670;&nbsp;</a></span>aws_cryptosdk_materials_cache_retain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct aws_cryptosdk_materials_cache* aws_cryptosdk_materials_cache_retain </td>
          <td>(</td>
          <td class="paramtype">struct aws_cryptosdk_materials_cache *&#160;</td>
          <td class="paramname"><em>materials_cache</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Increments the reference count on the materials cache </p>

<p class="definition">Definition at line <a class="el" href="cache_8h_source.html#l00492">492</a> of file <a class="el" href="cache_8h_source.html">cache.h</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>

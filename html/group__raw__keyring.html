<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AWS Encryption SDK for C: Keyrings using local (raw) keys</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">AWS Encryption SDK for C<span id="projectnumber">&#160;v2.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Keyrings using local (raw) keys</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga41283d1b647a9dbb97416dd86247bc44" id="r_ga41283d1b647a9dbb97416dd86247bc44"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga41283d1b647a9dbb97416dd86247bc44">aws_cryptosdk_aes_key_len</a> { <a class="el" href="#gga41283d1b647a9dbb97416dd86247bc44a3d28fdf880994616e18e23fc13de5bed">AWS_CRYPTOSDK_AES128</a> = 128 / 8
, <a class="el" href="#gga41283d1b647a9dbb97416dd86247bc44a5cb43a04b79b22cdd55708f922478b35">AWS_CRYPTOSDK_AES192</a> = 192 / 8
, <a class="el" href="#gga41283d1b647a9dbb97416dd86247bc44a36cf8c098cf3e09211c125e8d147c2d6">AWS_CRYPTOSDK_AES256</a> = 256 / 8
 }</td></tr>
<tr class="separator:ga41283d1b647a9dbb97416dd86247bc44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac9c87fc941b5a569d75b706abe18593d" id="r_gac9c87fc941b5a569d75b706abe18593d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac9c87fc941b5a569d75b706abe18593d">aws_cryptosdk_rsa_padding_mode</a> { <a class="el" href="#ggac9c87fc941b5a569d75b706abe18593da270665def26a8c2d44ec6fc1a7e6f8e1">AWS_CRYPTOSDK_RSA_PKCS1</a>
, <a class="el" href="#ggac9c87fc941b5a569d75b706abe18593daa838dbde765986769caa0cd60957b041">AWS_CRYPTOSDK_RSA_OAEP_SHA1_MGF1</a>
, <a class="el" href="#ggac9c87fc941b5a569d75b706abe18593da50e15356fb7d22fbb193a92207a18f1c">AWS_CRYPTOSDK_RSA_OAEP_SHA256_MGF1</a>
 }</td></tr>
<tr class="separator:gac9c87fc941b5a569d75b706abe18593d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaaceb90e17089a0e3599cc5d96e256f57" id="r_gaaceb90e17089a0e3599cc5d96e256f57"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structaws__cryptosdk__keyring.html">aws_cryptosdk_keyring</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaaceb90e17089a0e3599cc5d96e256f57">aws_cryptosdk_raw_aes_keyring_new</a> (struct aws_allocator *alloc, const struct aws_string *key_namespace, const struct aws_string *key_name, const uint8_t *key_bytes, enum <a class="el" href="#ga41283d1b647a9dbb97416dd86247bc44">aws_cryptosdk_aes_key_len</a> key_len)</td></tr>
<tr class="separator:gaaceb90e17089a0e3599cc5d96e256f57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaddf957915a6fd3b31ccc24b39976727b" id="r_gaddf957915a6fd3b31ccc24b39976727b"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structaws__cryptosdk__keyring.html">aws_cryptosdk_keyring</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaddf957915a6fd3b31ccc24b39976727b">aws_cryptosdk_raw_rsa_keyring_new</a> (struct aws_allocator *alloc, const struct aws_string *key_namespace, const struct aws_string *key_name, const char *rsa_private_key_pem, const char *rsa_public_key_pem, enum <a class="el" href="#gac9c87fc941b5a569d75b706abe18593d">aws_cryptosdk_rsa_padding_mode</a> rsa_padding_mode)</td></tr>
<tr class="separator:gaddf957915a6fd3b31ccc24b39976727b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga41283d1b647a9dbb97416dd86247bc44" name="ga41283d1b647a9dbb97416dd86247bc44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga41283d1b647a9dbb97416dd86247bc44">&#9670;&#160;</a></span>aws_cryptosdk_aes_key_len</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#ga41283d1b647a9dbb97416dd86247bc44">aws_cryptosdk_aes_key_len</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga41283d1b647a9dbb97416dd86247bc44a3d28fdf880994616e18e23fc13de5bed" name="gga41283d1b647a9dbb97416dd86247bc44a3d28fdf880994616e18e23fc13de5bed"></a>AWS_CRYPTOSDK_AES128&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga41283d1b647a9dbb97416dd86247bc44a5cb43a04b79b22cdd55708f922478b35" name="gga41283d1b647a9dbb97416dd86247bc44a5cb43a04b79b22cdd55708f922478b35"></a>AWS_CRYPTOSDK_AES192&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="gga41283d1b647a9dbb97416dd86247bc44a36cf8c098cf3e09211c125e8d147c2d6" name="gga41283d1b647a9dbb97416dd86247bc44a36cf8c098cf3e09211c125e8d147c2d6"></a>AWS_CRYPTOSDK_AES256&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="cipher_8h_source.html#l00035">35</a> of file <a class="el" href="cipher_8h_source.html">cipher.h</a>.</p>

</div>
</div>
<a id="gac9c87fc941b5a569d75b706abe18593d" name="gac9c87fc941b5a569d75b706abe18593d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac9c87fc941b5a569d75b706abe18593d">&#9670;&#160;</a></span>aws_cryptosdk_rsa_padding_mode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#gac9c87fc941b5a569d75b706abe18593d">aws_cryptosdk_rsa_padding_mode</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggac9c87fc941b5a569d75b706abe18593da270665def26a8c2d44ec6fc1a7e6f8e1" name="ggac9c87fc941b5a569d75b706abe18593da270665def26a8c2d44ec6fc1a7e6f8e1"></a>AWS_CRYPTOSDK_RSA_PKCS1&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ggac9c87fc941b5a569d75b706abe18593daa838dbde765986769caa0cd60957b041" name="ggac9c87fc941b5a569d75b706abe18593daa838dbde765986769caa0cd60957b041"></a>AWS_CRYPTOSDK_RSA_OAEP_SHA1_MGF1&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ggac9c87fc941b5a569d75b706abe18593da50e15356fb7d22fbb193a92207a18f1c" name="ggac9c87fc941b5a569d75b706abe18593da50e15356fb7d22fbb193a92207a18f1c"></a>AWS_CRYPTOSDK_RSA_OAEP_SHA256_MGF1&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="cipher_8h_source.html#l00042">42</a> of file <a class="el" href="cipher_8h_source.html">cipher.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaaceb90e17089a0e3599cc5d96e256f57" name="gaaceb90e17089a0e3599cc5d96e256f57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaceb90e17089a0e3599cc5d96e256f57">&#9670;&#160;</a></span>aws_cryptosdk_raw_aes_keyring_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structaws__cryptosdk__keyring.html">aws_cryptosdk_keyring</a> * aws_cryptosdk_raw_aes_keyring_new </td>
          <td>(</td>
          <td class="paramtype">struct aws_allocator *</td>          <td class="paramname"><span class="paramname"><em>alloc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct aws_string *</td>          <td class="paramname"><span class="paramname"><em>key_namespace</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct aws_string *</td>          <td class="paramname"><span class="paramname"><em>key_name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *</td>          <td class="paramname"><span class="paramname"><em>key_bytes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="#ga41283d1b647a9dbb97416dd86247bc44">aws_cryptosdk_aes_key_len</a></td>          <td class="paramname"><span class="paramname"><em>key_len</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A keyring which does local AES-GCM encryption and decryption of data keys using the bytes in the array provided as the wrapping key.</p>
<p>Key namespace, name, and raw key bytes provided by the caller are copied into the state of the KR, so those arrays do not need to be maintained while using the KR. For maximum security, the caller should zero out the array of raw key bytes after creating this object.</p>
<p>The encryption context which is passed to this KR on encrypt and decrypt calls is used as additional authenticated data (AAD) in the AES-GCM encryption of the data keys. This means that the same encryption context must be present for both encryption and decryption.</p>
<p>Set your own namespace and name for the wrapping key you use, for bookkeeping purposes. A raw AES keyring which attempts to decrypt data previously encrypted by another raw AES keyring must specify the same name and namespace.</p>
<p>Note: when this keyring is used, it generates a trace that includes copies of the namespace and name strings for each call. If you generate either or both of the namespace and name strings using the AWS_STATIC_STRING_FROM_LITERAL macro, all copies of these strings will be optimized out.</p>
<p>On failure returns NULL and sets an internal AWS error code. </p>

</div>
</div>
<a id="gaddf957915a6fd3b31ccc24b39976727b" name="gaddf957915a6fd3b31ccc24b39976727b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaddf957915a6fd3b31ccc24b39976727b">&#9670;&#160;</a></span>aws_cryptosdk_raw_rsa_keyring_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structaws__cryptosdk__keyring.html">aws_cryptosdk_keyring</a> * aws_cryptosdk_raw_rsa_keyring_new </td>
          <td>(</td>
          <td class="paramtype">struct aws_allocator *</td>          <td class="paramname"><span class="paramname"><em>alloc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct aws_string *</td>          <td class="paramname"><span class="paramname"><em>key_namespace</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct aws_string *</td>          <td class="paramname"><span class="paramname"><em>key_name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>rsa_private_key_pem</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>rsa_public_key_pem</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="#gac9c87fc941b5a569d75b706abe18593d">aws_cryptosdk_rsa_padding_mode</a></td>          <td class="paramname"><span class="paramname"><em>rsa_padding_mode</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A keyring which does local RSA encryption and decryption of data keys using the RSA keys provided as a null terminated C-string in PEM format.</p>
<p>Here, 'rsa_public_key_pem' is a null terminated C-string containing the public key in PEM format and 'rsa_private_key_pem' is a null terminated C-string containing the private key in PEM format. Note that either argument may be set to NULL. Encryption is possible only when a public key is provided, and decryption is possible only when a private key is provided.</p>
<p>Key namespace, name, RSA private key and RSA public key provided by the caller are copied into the state of the keyring, so those arrays do not need to be maintained while using the keyring. For maximum security, the caller should zero out the array of 'rsa_private_key_pem' after creating this object.</p>
<p>Set your own namespace and name for the wrapping (RSA) key you use, for bookkeeping purposes. A raw RSA keyring which attempts to decrypt data previously encrypted by another raw RSA keyring must specify the same name and namespace.</p>
<p>Note: when this keyring is used, it generates a trace that includes copies of the namespace and name strings for each call. If you generate either or both of the namespace and name strings using the AWS_STATIC_STRING_FROM_LITERAL macro, all copies of these strings will be optimized out.</p>
<p>On failure returns NULL and sets an internal AWS error code. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
